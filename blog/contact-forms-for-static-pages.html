<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Contact Forms for static pages</title>
<meta name="generator" content="Org Mode" />

<link rel="stylesheet" href="/css/htmlize.css" />
<link rel="stylesheet" href="/css/main.css" />
<link rel="stylesheet" href="/css/main-light.css" />
<link rel="stylesheet" href="/css/style.css" />
<script src="/js/index.js" defer></script>
</head>
<body>
<div id="preamble" class="status">
<nav class="menu"><ul><li>keer4n</li> <li><a href="/">/</a></li> <li><a href="/demos">/demos</a></li> <li><a href="/links.html">/links</a></li></ul></nav><div id="updated"> Updated: 2024-01-05 Fri 06:59</div>
</div>
<div id="content" class="content">
<header>
<h1 class="title">Contact Forms for static pages</h1>
</header><p>
The goal is to create a contact form for a static page which upon submission will invoke the default email client with contents populated.
</p>

<p>
This can be accomplish using <code>Javascript</code> and the <code>mailto</code> hyperlinks.
</p>


<p>
<code>mailto</code> link allows emails to be sent via default email client of the user. A basic <code>mailto</code> link is shown below.
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">a</span> <span class="org-variable-name">href</span>=<span class="org-string">"mailto:me@mysite.com"</span>&gt;Email me&lt;/<span class="org-function-name">a</span>&gt;
</pre>
</div>

<p>
On clicking the link, a user's default email client is invoked with to-address populated.
</p>

<p>
Furthermore, since it is a link, parameters can be attached to specify other components of an email like subject, body, cc, bcc, etc. 
For a simple static sites like those created with jekyll, this type of contact forms can be used.
</p>

<p>
A simple form as shown below can be used to get information from  a user.
</p>

<div class="org-src-container">
<pre class="src src-html">&lt;<span class="org-function-name">form</span>&gt;
  &lt;<span class="org-function-name">input</span> <span class="org-variable-name">type</span>=<span class="org-string">"text"</span> <span class="org-variable-name">id</span>=<span class="org-string">"name"</span> /&gt;
  &lt;<span class="org-function-name">input</span> <span class="org-variable-name">type</span>=<span class="org-string">"email"</span> <span class="org-variable-name">id</span>=<span class="org-string">"email"</span> /&gt;
  &lt;<span class="org-function-name">textarea</span> <span class="org-variable-name">rows</span>=<span class="org-string">"5"</span> <span class="org-variable-name">id</span>=<span class="org-string">"message"</span> &gt;&lt;/<span class="org-function-name">textarea</span>&gt;
  &lt;<span class="org-function-name">input</span> <span class="org-variable-name">type</span>=<span class="org-string">"submit"</span> <span class="org-variable-name">onclick</span>=<span class="org-string">"mail()"</span> <span class="org-variable-name">value</span>=<span class="org-string">"[ submit ]"</span> /&gt;
&lt;/<span class="org-function-name">form</span>&gt;
</pre>
</div>

<p>
This form will have fields for <b>name</b>, <b>email</b> and <b>message</b>. Special care needs to be taken with the <b>message</b> field if we are to preseve the text formatting. This is required because we will use <code>Javascript</code> for extracting the field values to create the <code>mailto</code> link and values extracted from these fields are not encoded for URLs; meaning spaces, newline characters, etc. are present which cannot be included in a URL. URL Encoding<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup> can be done with the <code>encodeURIComponent()</code> function available in <code>Javascript</code>.
</p>


<p>
Following is a <code>Javascript</code> function that can be called for the <code>onclick</code> attribute of the submit button for previous form.
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span class="org-keyword">function</span> <span class="org-function-name">mail</span>() {
  <span class="org-keyword">var</span> <span class="org-variable-name">email</span> = document.createElement(<span class="org-string">"a"</span>);
  email.href = <span class="org-string">"mailto:me@mysite.com?subject="</span> 
    + document.getElementById(<span class="org-string">"name"</span>).value 
    + <span class="org-string">"("</span> + document.getElementById(<span class="org-string">"email"</span>).value + <span class="org-string">")"</span>
    + <span class="org-string">"&amp;body="</span>
    + encodeURIComponent(document.getElementById(<span class="org-string">"message"</span>).value); 
  email.click();
}
</pre>
</div>

<p>
Here, first an anchor (link) element is created, then its <code>href</code> attribute is set to a <code>mailto</code> link with specified to-address, subject &amp; body parameters extracted from the form (notice the call to <code>encodeURIComponent</code> for the message body) and finally click event is simulated for the element.
</p>

<p>
This concludes the writeup. The contact form for this site is created using the same methods which can be viewed in <a href="https://github.com/keer4n/keer4n.github.io">github</a>.
</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
: <a href="https://www.w3schools.com/tags/ref_urlencode.ASP">HTML URL Encoding Reference</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<div><a href="https://github.com/keer4n">~</a></div><div> Generated by <a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.1 (<a href="https://orgmode.org">Org</a> mode 9.6.6)</div>
</div>
</body>
</html>
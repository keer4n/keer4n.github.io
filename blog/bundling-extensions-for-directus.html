<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bundling Extensions For Directus</title>
<meta name="generator" content="Org Mode" />

<link rel="icon" type="image/x-icon" href="/img/favicon.png" />
<link rel="stylesheet" href="/css/htmlize.css" />
<link rel="stylesheet" href="/css/main.css" />
<link rel="stylesheet" href="/css/style.css" />
<script src="/js/index.js" defer></script>
</head>
<body>
<div id="preamble" class="status">
<nav class="menu"><ul><li><a href="/about.html">keer4n</a></li> <li><a href="/">/</a></li> <li><a href="/demos">/demos</a></li> <li><a href="/links.html">/links</a></li></ul></nav><div id="updated"> Updated: 2024-03-05 Tue 01:44</div>
</div>
<div id="content" class="content">
<header>
<h1 class="title">Bundling Extensions For Directus</h1>
</header><p>
Directus v10
</p>

<p>
While bundling extensions for directus, you may want to use a module available in the used by the main directus module or maybe you want to keep the size of the extension build small. You can do so by declaring some dependency as <code>external</code>.
</p>

<p>
You can do so with extension config file: <code>extension.config.mjs</code>.
</p>

<p>
For e.g. If you want to use `sharp` which is included in the main directus module in your extension, you
can do so with the following extension.config.mjs.
</p>

<div class="org-src-container">
<pre class="src src-js"><span class="org-keyword">function</span> <span class="org-function-name">externalPlugin</span>(<span class="org-variable-name">options</span> = {}) {
  <span class="org-keyword">return</span> {
    name: <span class="org-string">"external-plugin"</span>,
    options(inputOptions) {
      <span class="org-keyword">const</span> <span class="org-variable-name">externals</span> = inputOptions.external;
      <span class="org-keyword">const</span> <span class="org-variable-name">customExternals</span> = options.externals;
      inputOptions.external = Array.isArray(customExternals) ? [...externals, ...customExternals] : externals;
    }
  }
}
<span class="org-keyword">export</span> <span class="org-keyword">default</span> {
  plugins: [
    externalPlugin({
      externals: [<span class="org-string">"sharp"</span>]
    })
  ]
}
</pre>
</div>

<div id="outline-container-orgb214857" class="outline-2">
<h2 id="orgb214857">Refs:</h2>
<div class="outline-text-2" id="text-orgb214857">
<ol class="org-ol">
<li><a href="https://github.com/directus/directus/discussions/18015">Github Discussion</a></li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<div><a href="https://github.com/keer4n">~</a></div><div> Generated by <a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.1 (<a href="https://orgmode.org">Org</a> mode 9.6.6)</div>
</div>
</body>
</html>